// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Shop {
  id             String   @id @default(uuid())
  shopDomain     String   @unique @map("shop_domain")
  accessTokenEnc String   @map("access_token_enc")
  installedAt    DateTime @default(now()) @map("installed_at")
  uninstalledAt  DateTime? @map("uninstalled_at")
  settings       String   @default("{}") // JSON string for branding/config
  createdAt      DateTime @default(now()) @map("created_at")
  updatedAt      DateTime @updatedAt @map("updated_at")

  assets Asset[]

  @@map("shops")
}

model Asset {
  id        String   @id @default(uuid())
  shopId    String   @map("shop_id")
  kind      String   // 'logo' or 'banner'
  url       String
  createdAt DateTime @default(now()) @map("created_at")

  shop Shop @relation(fields: [shopId], references: [id], onDelete: Cascade)

  @@map("assets")
}